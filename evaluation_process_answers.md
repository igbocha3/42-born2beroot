# Born2beRoot Ответы на вопросы Evaluation

## Обзор проекта

- Как работает виртуальная машина

  - Программное обеспечение, позволяющее запускать операционную систему внутри другой операционной системы. (например, Virtualbox и VMware).
  - Виртуальная машина - это компьютерный файл, обычно называемый образом, который ведет себя как настоящий компьютер. Она может работать в окне как отдельная вычислительная среда, часто для запуска другой операционной системы или даже для функционирования всего компьютера пользователя.
  - Виртуальная машина отделена от остальной части системы, а это значит, что программное обеспечение внутри виртуальной машины не может вмешиваться в работу основной операционной системы главного компьютера.

- Выбор операционной системы.
  - Debian
- Основные различия между CentOS и Debian.

    - CentOS - самый популярный дистрибутив, когда речь идет о серверных средах.
    - Debian, безусловно, самый безопасный и стабильный дистрибутив Linux на сегодняшний день. В нем есть система отслеживания ошибок для решения проблем.
    - Если вы используете эти дистрибутивы в качестве сервера, вам следует выбрать CentOS, так как он имеет долгосрочную поддержку и обновления. Debian в основном предпочитают опытные пользователи, которые хотят работать в качестве администратора. В отличие от него, бизнесмены, желающие получить стабильный и безопасный дистрибутив Linux для своих приложений, предпочитают CentOS.

- Назначение виртуальных машин
  - Создание и развертывание приложений в облаке.
  - Испытание новой операционной системы (ОС).
  - Создание новой среды для упрощения и ускорения выполнения разработчиками сценариев тестирования.
  - Резервное копирование существующей ОС.
  - ВМ позволяют легче масштабировать приложения путем добавления дополнительных физических или виртуальных серверов для распределения рабочей нагрузки между несколькими ВМ.
- Если оцениваемый студент выбрал CentOS: что такое SELinux и DNF
- Если оцениваемый студент выбрал Debian: разница между Aptitude и Apt, и что такое APPArmor
  - Aptitiude VS APT
    - Aptitude - это высокоуровневый менеджер пакетов, а APT - менеджер пакетов более низкого уровня, который может использоваться другими менеджерами пакетов более высокого уровня.
    - Aptitude имеет интерфейс, а apt - нет.
  - AppArmor
    - это модуль безопасности ядра Linux, который позволяет системному администратору ограничивать возможности программ с помощью профилей для каждой программы.
    - позволяет определять политику безопасности, которая предоставляет детальные разрешения для всех пользователей, программ, процессов, файлов и устройств.
    - предоставляет возможность определять политику только для тех процессов/скриптов, которые вам нравятся.
    - обеспечивает защиту объектов в соответствии с конфигурацией. Это означает, что приложение "иммунизирует" другие приложения по очереди. По умолчанию, то, что не было ранее установлено как "защищенное", является уязвимым.
    - AppArmor, возможно, нельзя считать столь же эффективным и безопасным, как, например, SELinux, но у него более простой и удобный интерфейс. Для человека, не привыкшего к системному администрированию, он станет отличной альтернативой для управления контролем доступа.

## Простая установка

- Убедитесь, что при запуске машина не имеет графического окружения
  - Перед попыткой подключения к этой машине будет запрошен пароль. Наконец, подключитесь с помощью оцениваемого студента. Этот пользователь не должен быть root.
- Обратите внимание на выбранный пароль, он должен соответствовать правилам, установленным в теме
- Проверьте, что служба UFW запущена с помощью оцениваемого
  - `sudo ufw status`
- Проверьте, что служба SSH запущена с помощью эксперта
  - `sudo systemctl status ssh`
  - `sudo service ssh status`
- Проверьте, что выбранная операционная система - Debian или CentOS, с помощью оценщика
  - `head -n 2 /etc/os-release`

## Пользователь

- Испытуемый просит, чтобы на виртуальной машине присутствовал пользователь с логином оцениваемого студента. Проверьте, что он добавлен и входит в группы "sudo" и "user42"
  - `groups <имя пользователя>`
- Убедитесь, что правила, установленные в теме относительно политики паролей, были введены в действие, выполнив следующие шаги
- Во-первых, создайте нового пользователя. Назначьте ему пароль по своему выбору, соблюдая правила предмета. Теперь оцениваемый студент должен объяснить вам, как он смог установить на своей виртуальной машине правила, предусмотренные предметом. Обычно это должны быть один или два измененных файла. Если возникли какие-либо проблемы, оценка прекращается на этом

  - `sudo adduser <username>`
  - `getent passwd <имя пользователя>`
  - Файлы политики паролей
    - `sudo vim /etc/login.defs`
    - `sudo vim /etc/pam.d/common-password`

- Теперь, когда у вас есть новый пользователь, попросите оцениваемого студента создать перед вами группу с именем "evaluating" и назначить ее этому пользователю. Наконец, проверьте, что этот пользователь принадлежит к группе "evaluating"
  - `sudo addgroup evaluating`
  - `adduser <имя пользователя> evaluating`
- Наконец, попросите оцениваемого студента объяснить преимущества этой политики паролей, а также достоинства и недостатки ее применения. Конечно, ответ, что это потому, что испытуемый просит об этом, не считается
  - Наличие уникального пароля означает, что его будет сложнее взломать. Недостатком может быть то, что люди скорее всего забудут свой пароль, если только он не был сохранен или записан где-нибудь

## Имя хоста и разделы

- Убедитесь, что имя хоста машины правильно оформлено следующим образом: login42 (логин оцениваемого студента)
  - `sudo hostnamectl status`
- Измените это имя хоста, заменив логин на свой, затем перезагрузите машину. Если при перезагрузке имя хоста не было обновлено, оценка прекращается

  - `sudo hostnamectl set-hostname <new-hostname>`
  - Измените файл `etc/hosts
    - `sudo vim /etc/hosts`
  - Измените старое имя_хоста на новое имя_хоста
    - 127.0.0.1 old_hostname => 127.0.0.1 new_hostname
  - Перезагрузитесь и проверьте изменения
    - `sudo reboot`

- Теперь вы можете восстановить машину на исходное имя хоста
  - Та же команда, что и команда сверху
- Спросите оцениваемого студента, как просмотреть разделы для этой виртуальной машины
  - `lsblk`
- Сравните полученный результат с примером, приведенным в теме. Обратите внимание: если оцениваемый студент делает бонусы, необходимо будет обратиться к бонусному примеру. Эта часть - возможность обсудить оценки! Оцениваемый студент должен кратко объяснить вам, как работает LVM и в чем его суть. Если что-то работает не так, как ожидалось, или объяснено нечетко, оценка на этом прекращается
  - Диспетчер логических томов" - это система отображения и управления памятью жесткого диска, используемая в системах на базе ядра Linux. Вместо старого метода разбиения дисков на разделы с одной файловой системой и ограничением ее только 4 разделами, LVM позволяет работать с "Логическими томами", более динамным и гибким способом работы с аппаратным обеспечением

## Sudo

- Убедитесь, что программа "sudo" правильно установлена на виртуальной машине
  - `sudo`
  - `dpkg -l | grep sudo`
- Теперь оцениваемый студент должен показать назначение вашего нового пользователя в группу "sudo"
  - `adduser <имя пользователя> sudo`
  - Проверьте, был ли пользователь добавлен в sudo: `groups <username>`
- Предмет устанавливает строгие правила для sudo. Оцениваемый студент должен сначала объяснить значение и работу sudo на примерах по своему выбору. На втором этапе он должен продемонстрировать выполнение правил, навязанных испытуемым
  - Ценность sudo заключается в том, что он дает пользователям временную привилегию root. Только люди, имеющие эту привилегию, могут получить доступ к этим файлам. Это делается для того, чтобы предотвратить возникновение конфликтов. Например, sudo позволит пользователям перечислять/редактировать файлы в определенном каталоге
  - Файл политики sudo
    - `sudo vim /etc/sudoers.d/sudo_config`
- Убедитесь, что папка "var/log/sudo" существует и содержит хотя бы один файл. Проверьте содержимое файлов в этой папке, вы должны увидеть историю команд, использованных с помощью sudo. Наконец, попробуйте запустить команду через sudo. Проверьте, был ли обновлен файл(ы) в папке "var/log/sudo"
  - `sudo vim /var/log/sudo/sudo.log`

## UFW

- Проверьте, правильно ли установлена программа "UFW" на виртуальной машине
  - `dpkg -l | grep ufw`
- Проверьте, работает ли она должным образом
  - `sudo ufw status`
- Оцениваемый студент должен объяснить вам, что такое UFW и в чем ценность его использования
  - UFW (незащищенный брандмауэр) отвечает за контроль трафика информации и данных с вашего локального компьютера в сеть. Он разрешает/блокирует входящие соединения.
  - Его ценность заключается в том, что пользователи не смогут подключиться к определенному порту, если UFW его не открыл.
- Перечислите активные правила в UFW. Правило должно существовать для порта 4242
  - `sudo ufw status`
- Добавьте новое правило для открытия порта 8080. Проверьте, что оно было добавлено, просмотрев список активных правил
  - `sudo ufw allow 8080`
- Наконец, удалите это новое правило с помощью оцениваемого студента
  - `sudo ufw delete <номер правила>`
  - `sudo ufw delete allow <номер порта>`

## SSH

- Проверьте, правильно ли установлена служба SSH на виртуальной машине
  - `dpkg -l | grep sudo`
- Проверьте, работает ли она должным образом
  - `sudo systemctl status ssh`
- Оцениваемый студент должен быть в состоянии объяснить вам, что такое SSH и в чем ценность его использования
  - SSH (secure shell) - это сетевой протокол, который предоставляет пользователям, особенно системным администраторам, безопасный способ доступа к компьютеру через незащищенную сеть. Он предоставляет пользователям надежную аутентификацию с помощью пароля, а также аутентификацию с помощью открытого ключа. Он пытается безопасно передавать зашифрованные данные через два компьютера, используя открытую сеть.
- Убедитесь, что служба SSH использует только порт 4242
  - `sudo systemctl status ssh`
- Оцениваемый студент должен помочь вам использовать SSH, чтобы войти в систему под вновь созданным пользователем. Для этого вы можете использовать ключ или простой пароль. Это зависит от оцениваемого студента. Конечно, вы должны убедиться, что вы не можете использовать SSH с пользователем "root", как указано в теме
  - `ssh <user>@localhost -p 4242`
  - `ssh root@localhost -p 4242` не должно работать!

# Контроль сценария

Оцениваемый студент должен просто объяснить вам:

- Как работает их скрипт, показав вам код
  - `sudo vim /usr/local/bin/monitoring.sh`
- Что такое "Cron"
  - Cron - это служба, которая работает на бэкграунде и запускает настроенные задачи по расписанию.
- Как оцениваемый студент настроил свой скрипт так, чтобы он запускался каждые 10 минут с момента запуска сервера
  - `sudo crontab -u root -e`
- После проверки правильности работы скрипта оцениваемый студент должен убедиться, что этот скрипт запускается каждую минуту. Для проверки правильности работы скрипта с динамическими значениями можно запустить любую программу
  - `*/1 * * * * * sh /usr/local/bin/monitoring.sh | wall`
- Наконец, оцениваемый студент должен заставить скрипт прекратить выполнение при запуске сервера, но без изменения самого скрипта. Чтобы проверить этот пункт, необходимо в последний раз перезапустить сервер. При запуске нужно будет проверить, что скрипт по-прежнему существует в том же месте, что его права остались неизменными, и что он не был модифицирован
  - `sudo crontab -u root -e`
  - Закомментируйте эту строку: `*/1 * * * * * sh /usr/local/bin/monitoring.sh | wall`

## Бонус

- Настройка разделов оценивается в 2 балла.
- Установка WordPress, только с сервисами, необходимыми для темы, оценивается в 2 балла.
- Услуга свободного выбора оценивается в 1 балл.
- Проверьте и протестируйте правильность функционирования и внедрения каждой дополнительной службы.
  Для бесплатного сервиса оцениваемый студент должен дать вам простое объяснение того, как он работает и почему он считает его полезным. Обратите внимание, что NGINX и Apache2 запрещены.